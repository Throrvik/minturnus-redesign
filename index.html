<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MinTurnus - Forside</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/cookie-consent.css">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #E5E7EB;
    }
    h1, h2, h3 {
      font-family: 'Montserrat', sans-serif;
    }
    .accent-text {
      color: #F4A300;
    }
    .btn-primary {
      background: linear-gradient(90deg, #F97316, #FB923C);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .hero-section {
      background: linear-gradient(135deg, #1F2937 0%, #374151 100%);
      clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
    }
    .card {
      transition: transform 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
    }
    .nav-active {
      transform: translateX(0);
    }
    #user-menu {
      position: absolute;
      top: 56px;
      right: 1rem;
      background-color: #374151;
      border-radius: 0.25rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      display: none;
      min-width: 150px;
      z-index: 50;
    }
    #user-menu a {
      display: block;
      padding: 8px 16px;
      color: #fff;
    }
    #user-menu a:hover {
      background-color: #4B5563;
    }
    #notification-info {
      font-size: 0.75rem;
      color: #D1D5DB;
      padding: 4px 16px;
    }
  </style>
</head>
<body class="antialiased">
  <!-- Navigasjon -->
  <nav class="bg-gray-900 text-white p-4 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold"><span class="text-white">Min</span><span class="accent-text">Turnus</span></a>
      <button id="menuBtn" class="text-3xl md:hidden text-orange-400 focus:outline-none">☰</button>
      <div id="navLinks" class="hidden md:flex space-x-6 items-center">
        <a href="index.html" class="hover:text-orange-400 transition-colors">Hjem</a>
        <a href="kalender.html" class="hover:text-orange-400 transition-colors">Kalender</a>
        <a href="friends.html" class="friends-link hidden hover:text-orange-400 transition-colors">Friends</a>
        <a href="about.html" class="hover:text-orange-400 transition-colors">Om oss</a>
        <a href="register.html" class="register-link hover:text-orange-400 transition-colors">Opprett profil</a>
        <div id="user-info" class="ml-4 hidden items-center space-x-2">
          <img id="user-avatar" src="" alt="Avatar" class="w-8 h-8 rounded-full object-cover">
          <span id="user-firstname" class="text-sm"></span>
        </div>
      </div>
    </div>
    <!-- Mobilmeny -->
    <div id="mobileMenu" class="hidden md:hidden bg-gray-800 text-white fixed top-0 right-0 h-full w-64 p-6 transform translate-x-full">
      <button id="closeMenu" class="text-2xl mb-4 text-orange-400">✕</button>
      <a href="index.html" class="block py-2 hover:text-orange-400">Hjem</a>
      <a href="kalender.html" class="block py-2 hover:text-orange-400">Kalender</a>
      <a href="friends.html" class="friends-link block py-2 hover:text-orange-400 hidden">Friends</a>
      <a href="about.html" class="block py-2 hover:text-orange-400">Om oss</a>
      <a href="register.html" class="register-link block py-2 hover:text-orange-400">Opprett profil</a>
    </div>
  </nav>

  <!-- Hero-seksjon -->
  <header class="hero-section text-white py-20">
    <div class="container mx-auto text-center px-4">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Planlegg skift med stil</h1>
      <p class="text-lg md:text-xl mb-8 text-gray-300">MinTurnus gjør skiftplanlegging enkelt, raskt og moderne.</p>
      <a href="login.html" class="inline-block px-8 py-3 btn-primary text-white rounded-full font-semibold">Kom i gang</a>
    </div>
  </header>

  <!-- Om MinTurnus -->
  <main class="container mx-auto py-12 px-4">
    <section class="mb-12 text-center max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold text-gray-900 mb-6">Velkommen til MinTurnus</h2>
      <p class="text-lg text-gray-700">Her kan du enkelt planlegge, følge opp og dele turnuser med dine kollegaer. Systemet er designet for helsepersonell og andre skiftarbeidere som ønsker en visuell og fleksibel oversikt over arbeid og fritid.</p>
    </section>
  </main>

  <!-- Cookie consent -->
  <div id="cookie-consent" class="fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 flex justify-between items-center">
    <p class="text-sm">Dette nettstedet bruker informasjonskapsler til å lagre dine innstillinger i nettleseren og forbedre opplevelsen i henhold til gjeldende personvernlovgivning.</p>
    <div class="flex gap-2">
      <button id="accept-cookies" class="btn-primary px-4 py-2 text-white rounded-md">Godta</button>
      <button id="decline-cookies" class="btn-secondary px-4 py-2 text-white rounded-md">Avslå</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-8 text-center">
    <p>© 2025 MinTurnus.no | <a href="privacy.html" class="text-orange-400 hover:underline">Personvernerklæring</a></p>
  </footer>

  <script>
    const menuBtn = document.getElementById('menuBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  const closeMenu = document.getElementById('closeMenu');
  const userInfo = document.getElementById('user-info');
  const userAvatar = document.getElementById('user-avatar');
  const userFirstName = document.getElementById('user-firstname');
  const registerLinks = document.querySelectorAll('a[href="register.html"]');
  const friendsLinks = document.querySelectorAll('a[href="friends.html"]');

    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      mobileMenu.classList.toggle('nav-active');
    });

    closeMenu.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
      mobileMenu.classList.remove('nav-active');
    });

    // Hent navn og bilde hvis logget inn
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const res = await fetch('backend/get_user_data.php', { credentials: 'include' });
        if (!res.ok) return;
        const data = await res.json();
        if (data.status === 'success' && data.user) {
          if (userInfo) userInfo.classList.remove('hidden');
          if (userFirstName) userFirstName.textContent = data.user.firstname || '';
          if (userAvatar && data.user.avatar_url) {
            let src = data.user.avatar_url;
            if (!src.startsWith('http')) {
              src = src.replace(/^\/+/, '');
              src = 'https://minturnus.no/' + src;
            }
            userAvatar.src = src;
          }
          registerLinks.forEach(l => l.classList.add('hidden'));
          friendsLinks.forEach(l => l.classList.remove('hidden'));
        } else {
          friendsLinks.forEach(l => l.classList.add('hidden'));
        }
      } catch (e) {
        console.error('Kunne ikke hente brukerinfo:', e);
      }
    });

    const cookieConsent = document.getElementById('cookie-consent');
    const acceptCookies = document.getElementById('accept-cookies');
    const declineCookies = document.getElementById('decline-cookies');

    acceptCookies.addEventListener('click', () => {
      cookieConsent.classList.add('hidden');
    });

    declineCookies.addEventListener('click', () => {
      cookieConsent.classList.add('hidden');
    });
  </script>
</body>
</html>